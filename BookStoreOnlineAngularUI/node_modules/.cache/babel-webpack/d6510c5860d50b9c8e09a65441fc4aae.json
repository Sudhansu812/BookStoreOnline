{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Sudhanshu/Desktop/BookStoreOnline/BookStoreOnlineAngularUI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { switchMap } from 'rxjs/operators';\nimport { ShowBookComponent } from '../show-book/show-book.component';\nlet HomeComponent = class HomeComponent {\n  constructor(route, service, dialog) {\n    this.route = route;\n    this.service = service;\n    this.dialog = dialog;\n    this.listData = new MatTableDataSource();\n    this.displayedColumns = ['bookId', 'bookTitle', 'bookAuthorName', 'bookDescription', 'category', 'bookRating', 'bookNumberOfRatings', 'bookPrice'];\n    this.mostSoldBooks = [];\n    this.trendingBooks = [];\n    this.recentBooks = [];\n    this.service.listen().subscribe(m => {\n      this.refreshMostSoldBookList();\n    });\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.refreshMostSoldBookList();\n      yield _this.refreshTrendingBookList();\n      yield _this.refreshRecentBookList();\n    })();\n  }\n\n  refreshMostSoldBookList() {\n    this.service.mostSoldBooks$.pipe(switchMap(data => {\n      this.mostSoldBooks = data;\n      return this.route.queryParams;\n    })).subscribe();\n  }\n\n  refreshTrendingBookList() {\n    this.service.trendingBooks$.pipe(switchMap(data => {\n      this.trendingBooks = data;\n      return this.route.queryParams;\n    })).subscribe();\n  }\n\n  refreshRecentBookList() {\n    this.service.mostSoldBooks$.pipe(switchMap(data => {\n      this.recentBooks = data;\n      return this.route.queryParams;\n    })).subscribe();\n  }\n\n  onClick(book) {\n    console.log(book.bookTitle);\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = \"70%\";\n    this.dialog.open(ShowBookComponent, dialogConfig);\n  }\n\n};\n\n__decorate([ViewChild(MatSort)], HomeComponent.prototype, \"sort\", void 0);\n\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["C:\\Users\\Sudhanshu\\Desktop\\BookStoreOnline\\BookStoreOnlineAngularUI\\src\\app\\Components\\home\\home.component.ts"],"names":[],"mappings":";;AAAA,SAAS,SAAT,EAA4B,SAA5B,QAA6C,eAA7C;AACA,SAAS,eAAT,QAAgC,0BAAhC;AACA,SAAS,OAAT,QAAwB,wBAAxB;AACA,SAAS,kBAAT,QAAmC,yBAAnC;AAEA,SAAS,SAAT,QAA0B,gBAA1B;AAGA,SAAS,iBAAT,QAAkC,kCAAlC;AAOA,IAAa,aAAa,GAA1B,MAAa,aAAb,CAA0B;AAExB,EAAA,WAAA,CACU,KADV,EAEU,OAFV,EAGU,MAHV,EAG2B;AAFjB,SAAA,KAAA,GAAA,KAAA;AACA,SAAA,OAAA,GAAA,OAAA;AACA,SAAA,MAAA,GAAA,MAAA;AAQV,SAAA,QAAA,GAAoC,IAAI,kBAAJ,EAApC;AACA,SAAA,gBAAA,GAA8B,CAAC,QAAD,EAAW,WAAX,EAAwB,gBAAxB,EAA0C,iBAA1C,EAA6D,UAA7D,EAAyE,YAAzE,EAAuF,qBAAvF,EAA8G,WAA9G,CAA9B;AAIO,SAAA,aAAA,GAAwB,EAAxB;AACA,SAAA,aAAA,GAAwB,EAAxB;AACA,SAAA,WAAA,GAAsB,EAAtB;AAZL,SAAK,OAAL,CAAa,MAAb,GAAsB,SAAtB,CAAiC,CAAD,IAAS;AACvC,WAAK,uBAAL;AACD,KAFD;AAGD;;AAWK,EAAA,QAAQ,GAAA;AAAA;;AAAA;AACZ,YAAM,KAAI,CAAC,uBAAL,EAAN;AACA,YAAM,KAAI,CAAC,uBAAL,EAAN;AACA,YAAM,KAAI,CAAC,qBAAL,EAAN;AAHY;AAIb;;AAGD,EAAA,uBAAuB,GAAA;AACrB,SAAK,OAAL,CAAa,cAAb,CAA4B,IAA5B,CAAiC,SAAS,CACvC,IAAD,IAAiB;AACf,WAAK,aAAL,GAAqB,IAArB;AACA,aAAO,KAAK,KAAL,CAAW,WAAlB;AACD,KAJuC,CAA1C,EAKG,SALH;AAMD;;AAED,EAAA,uBAAuB,GAAA;AACrB,SAAK,OAAL,CAAa,cAAb,CAA4B,IAA5B,CAAiC,SAAS,CACvC,IAAD,IAAiB;AACf,WAAK,aAAL,GAAqB,IAArB;AACA,aAAO,KAAK,KAAL,CAAW,WAAlB;AACD,KAJuC,CAA1C,EAKG,SALH;AAMD;;AAED,EAAA,qBAAqB,GAAA;AACnB,SAAK,OAAL,CAAa,cAAb,CAA4B,IAA5B,CAAiC,SAAS,CACvC,IAAD,IAAiB;AACf,WAAK,WAAL,GAAmB,IAAnB;AACA,aAAO,KAAK,KAAL,CAAW,WAAlB;AACD,KAJuC,CAA1C,EAKG,SALH;AAMD;;AAED,EAAA,OAAO,CAAC,IAAD,EAAW;AAEhB,IAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,SAAjB;AACA,UAAM,YAAY,GAAG,IAAI,eAAJ,EAArB;AACA,IAAA,YAAY,CAAC,YAAb,GAA4B,IAA5B;AACA,IAAA,YAAY,CAAC,SAAb,GAAyB,IAAzB;AACA,IAAA,YAAY,CAAC,KAAb,GAAqB,KAArB;AACA,SAAK,MAAL,CAAY,IAAZ,CAAiB,iBAAjB,EAAoC,YAApC;AACD;;AAhEuB,CAA1B;;AAgBsB,UAAA,CAAA,CAAnB,SAAS,CAAC,OAAD,CAAU,CAAA,E,uBAAA,E,MAAA,E,KAAc,CAAd,CAAA;;AAhBT,aAAa,GAAA,UAAA,CAAA,CALzB,SAAS,CAAC;AACT,EAAA,QAAQ,EAAE,UADD;AAET,EAAA,WAAW,EAAE,uBAFJ;AAGT,EAAA,SAAS,EAAE,CAAC,sBAAD;AAHF,CAAD,CAKgB,CAAA,EAAb,aAAa,CAAb;SAAA,a","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MatSort } from '@angular/material/sort';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { ActivatedRoute } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { Book } from 'src/app/Models/book-model';\nimport { HomeService } from 'src/app/services/home.service';\nimport { ShowBookComponent } from '../show-book/show-book.component';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n\n  constructor(\n    private route: ActivatedRoute,\n    private service: HomeService,\n    private dialog: MatDialog\n  )\n  { \n    this.service.listen().subscribe((m:any)=>{\n      this.refreshMostSoldBookList();\n    });\n  }\n\n  listData: MatTableDataSource<any> = new MatTableDataSource<any>();\n  displayedColumns : string[] = ['bookId', 'bookTitle', 'bookAuthorName', 'bookDescription', 'category', 'bookRating', 'bookNumberOfRatings', 'bookPrice'];\n\n  @ViewChild(MatSort) sort: MatSort;\n  \n  public mostSoldBooks: Book[] = [];\n  public trendingBooks: Book[] = [];\n  public recentBooks: Book[] = [];\n\n  async ngOnInit(): Promise<void> {\n    await this.refreshMostSoldBookList();\n    await this.refreshTrendingBookList();\n    await this.refreshRecentBookList();\n  }\n\n  \n  refreshMostSoldBookList() {\n    this.service.mostSoldBooks$.pipe(switchMap(\n      (data: Book[]) => {\n        this.mostSoldBooks = data;\n        return this.route.queryParams;\n      }\n    )).subscribe();\n  }\n\n  refreshTrendingBookList() {\n    this.service.trendingBooks$.pipe(switchMap(\n      (data: Book[]) => {\n        this.trendingBooks = data;\n        return this.route.queryParams;\n      }\n    )).subscribe();\n  }\n\n  refreshRecentBookList() {\n    this.service.mostSoldBooks$.pipe(switchMap(\n      (data: Book[]) => {\n        this.recentBooks = data;\n        return this.route.queryParams;\n      }\n    )).subscribe();\n  }\n\n  onClick(book: Book)\n  {\n    console.log(book.bookTitle);\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n    dialogConfig.width = \"70%\";\n    this.dialog.open(ShowBookComponent, dialogConfig);\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}